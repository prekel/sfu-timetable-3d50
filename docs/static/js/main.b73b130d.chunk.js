(this["webpackJsonpsfu-timetable-3d50"]=this["webpackJsonpsfu-timetable-3d50"]||[]).push([[0],{71:function(e,t,n){},72:function(e,t,n){},82:function(e,t,n){"use strict";n.r(t);var c={};n.r(c),n.d(c,"$$Option",(function(){})),n.d(c,"Result",(function(){})),n.d(c,"Json",(function(){})),n.d(c,"Dict",(function(){})),n.d(c,"decodeStringExn",(function(){return Q})),n.d(c,"Day",(function(){return J})),n.d(c,"Week",(function(){return A})),n.d(c,"Lesson",(function(){return G})),n.d(c,"Timetable",(function(){return K}));var r=n(0),a=n.n(r),s=n(33),i=n.n(s),u=(n(71),n(15)),j=(n(72),n(23)),o=n(86),l=n(11),b=n(89),d=n(84),h=n(62),O=n(85),x=n(1),m=function(){var e=Object(l.n)("/:target"),t=Object(r.useState)(e?null===e||void 0===e?void 0:e.params.target:""),n=Object(u.a)(t,2),c=n[0],a=n[1],s=Object(r.useState)(c),i=Object(u.a)(s,2),j=i[0],o=i[1],m=Object(r.useState)(!1),f=Object(u.a)(m,2),g=f[0],p=f[1];return Object(r.useEffect)((function(){return p(!1),function(){}}),[e]),Object(x.jsxs)(x.Fragment,{children:[g?Object(x.jsx)(l.c,{push:!0,to:"/"+encodeURIComponent(j)}):Object(x.jsx)(x.Fragment,{}),Object(x.jsx)(b.a,{inline:!0,onSubmit:function(e){e.preventDefault(),p(!0),o(c)},children:Object(x.jsxs)(d.a,{className:"no-gutters",children:[Object(x.jsx)(h.a,{children:Object(x.jsx)(b.a.Group,{children:Object(x.jsx)(b.a.Control,{className:"mr-sm-2",placeholder:"\u0413\u0440\u0443\u043f\u043f\u0430/\u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u044c",onChange:function(e){return a(e.target.value)}})})}),Object(x.jsx)(h.a,{children:Object(x.jsx)(O.a,{type:"submit",children:"\u041e\u0442\u043a\u0440\u044b\u0442\u044c"})})]})})]})},f=n(87),g=function(e){var t=e.children;return Object(x.jsx)(o.a,{children:Object(x.jsx)(f.a,{children:t})})},p=function(){return Object(x.jsxs)(g,{children:[Object(x.jsx)("h3",{children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0433\u0440\u0443\u043f\u043f\u0443 \u0438\u043b\u0438 \u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u044f: "}),Object(x.jsx)(m,{})]})},y=n(93),v=n(94),k=function(e){var t,n=e.lesson;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(d.a,{children:[Object(x.jsx)(h.a,{children:Object(x.jsx)("p",{children:n.time})}),Object(x.jsx)(h.a,{children:Object(x.jsx)("p",{children:n.type_})})]}),Object(x.jsx)(d.a,{children:Object(x.jsx)(h.a,{children:Object(x.jsx)("p",{children:n.subject})})}),Object(x.jsxs)(d.a,{children:[Object(x.jsx)(h.a,{children:Object(x.jsx)("p",{children:n.teacher?Object(x.jsx)(j.Link,{to:"/"+encodeURIComponent(n.teacher),children:n.teacher}):null===(t=n.groups)||void 0===t?void 0:t.map((function(e,t,n){return Object(x.jsxs)(a.a.Fragment,{children:[Object(x.jsx)(j.Link,{to:"/"+encodeURIComponent(e),children:e}),t!==n.length-1?Object(x.jsx)("span",{children:", "}):Object(x.jsx)(x.Fragment,{})]},e)}))})}),Object(x.jsx)(h.a,{children:Object(x.jsx)("p",{children:n.place})})]})]})},C=n(48),S=n(7),T=n(53);var w={JsError:T.b,$$catch:T.a,then_:function(e,t){return e.then(S.c(t))},thenResolve:function(e,t){return e.then(S.c(t))}},F=n(19),_=n(13),N=n(30),I=n(54),L=n(8);function D(e){return L.b(_.c(e))}var E=n(36),R=n(25);function Q(e,t){return L.b(L.a(F.a(e,t),_.c))}function U(e){switch(e){case 1:return 0;case 2:return 1;case 3:return 2;case 4:return 3;case 5:return 4;case 6:return 5;case 0:case 7:return 6;default:return E.a("No day of week")}}function q(e){return U(L.b(I.a(L.b(_.c(e)))))}var J={toNumber:function(e){return e+1|0},fromNumber:U,decodeExn:q,toRu:function(e){switch(e){case 0:return"\u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a";case 1:return"\u0412\u0442\u043e\u0440\u043d\u0438\u043a";case 2:return"\u0421\u0440\u0435\u0434\u0430";case 3:return"\u0427\u0435\u0442\u0432\u0435\u0440\u0433";case 4:return"\u041f\u044f\u0442\u043d\u0438\u0446\u0430";case 5:return"\u0421\u0443\u0431\u0431\u043e\u0442\u0430";case 6:return"\u0412\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435"}},toEn:function(e){switch(e){case 0:return"Monday";case 1:return"Tuesday";case 2:return"Wednesday";case 3:return"Thursday";case 4:return"Friday";case 5:return"Saturday";case 6:return"Sunday"}},all:[0,1,2,3,4,5,6]};function M(e){return 1!==e?2!==e?E.a(""):1:0}function W(e){return M(L.b(I.a(L.b(_.c(e)))))}var A={fromNumber:M,decodeExn:W,fromDate:function(e){var t=0|e.getDate(),n=0|e.getMonth(),c=0|e.getFullYear(),r=n+1|0,a=N.a((14-r)/12),s=(c+4800|0)-a|0,i=(r+Math.imul(12,a)|0)-3|0,u=(((((t+N.a((153*i+2)/5)|0)+Math.imul(365,s)|0)+N.a(s/4)|0)-N.a(s/100)|0)+N.a(s/400)|0)-32045|0,j=((u+31741|0)-u%7|0)%146097%36524%1461,o=N.a(j/1460),l=(j-o|0)%365+o|0;return(N.a(l/7)+1|0)%2===0?1:0}};function B(e){try{var t=L.b(_.b(e)),n=L.b(L.c(F.a(t,"day"),q)),c=L.b(L.c(F.a(t,"week"),W)),r=L.a(F.a(t,"teacher"),_.c),a=L.c(L.c(L.a(F.a(t,"groups"),_.a),(function(e){return C.a(_.c,e)})),(function(e){return C.a(L.b,e)}));return{day:n,week:c,time:L.b(L.c(F.a(t,"time"),D)),subject:L.b(L.a(F.a(t,"subject"),_.c)),type_:L.b(L.a(F.a(t,"type"),_.c)),teacher:r,groups:a,place:L.b(L.a(F.a(t,"place"),_.c)),building:L.b(L.a(F.a(t,"building"),_.c)),room:L.b(L.a(F.a(t,"room"),_.c)),sync:L.b(L.a(F.a(t,"sync"),_.c))}}catch(i){var s=R.a(i);return console.error(s),E.a("Failed to decode Lesson")}}var G={decodeExn:B};function $(e){try{var t=L.b(_.b(e));return{TAG:0,_0:{timetable:L.b(L.c(L.a(F.a(t,"timetable"),_.a),(function(e){return C.a(B,e)}))),target:Q(t,"target"),type_:L.b(L.a(F.a(t,"type"),_.c)),institute:L.a(F.a(t,"institute"),_.c)}}}catch(c){var n=R.a(c);return console.error(n),{TAG:1,_0:"Failed to decode Timetable"}}}function H(e){return w.thenResolve(w.then_(fetch("https://edu.sfu-kras.ru/api/timetable/get&target="+encodeURIComponent(e)),(function(e){return e.json()})),$)}var K={decode:$,$$fetch:H,fetchOpt:function(e){return H(e).then((function(e){if(0===e.TAG)return e._0}))},fetchExn:function(e){return H(e).then((function(e){return 0===e.TAG?e._0:E.a(e._0)}))}},P={0:"Monday",1:"Tuesday",2:"Wednesday",3:"Thursday",4:"Friday",5:"Saturday",6:"Sunday"},Y={Monday:0,Tuesday:1,Wednesday:2,Thursday:3,Friday:4,Saturday:5,Sunday:6},z={0:"Uneven",1:"Even"},V=c,X=function(e){var t=V.Day.fromNumber(e);return P[t]},Z=V.Day.all.map((function(e){return P[e]})),ee=function(e){var t=V.Week.fromDate(e);return z[t]},te=function(e){var t,n=e.day,c=e.week,r=e.timetable,a=e.date,s=r.timetable.filter((function(e){return e.day===n&&e.week===c})).map((function(e){return Object(x.jsx)(y.a.Item,{children:Object(x.jsx)(k,{lesson:e})},e.day+e.week+e.time+e.groups+e.teacher+e.type_)})),i=a?" "+a.toLocaleString("ru-RU",{year:"numeric",month:"long",day:"numeric"}):"";return Object(x.jsxs)(v.a,{className:"mb-4",children:[Object(x.jsxs)(v.a.Header,{children:[(t=n,V.Day.toRu(Y[t]))," ",i]}),0===s.length?Object(x.jsx)(v.a.Body,{children:"\u041d\u0435\u0442 \u0437\u0430\u043d\u044f\u0442\u0438\u0439"}):Object(x.jsx)(y.a,{variant:"flush",children:s})]})},ne=function(e){var t=e.timetable,n=Object(r.useState)(3),c=Object(u.a)(n,2),a=c[0],s=c[1],i=new Date,j=Array.from({length:20},(function(e,t){return t})).map((function(e){return e-3})).map((function(e){var t=new Date;return t.setDate(i.getDate()+e),t})),o=j[a-1],l=j[a],b=j[a+1];return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(d.a,{className:"mb-4",children:[Object(x.jsx)(h.a,{xs:2,sm:1,children:Object(x.jsx)(O.a,{className:"timetable-carousel-btn",variant:"light",onClick:function(){return s(a-1)},disabled:1===a,children:"<"})}),Object(x.jsx)(h.a,{sm:3,className:"d-none d-sm-block",children:Object(x.jsx)(te,{day:X(o.getDay()),week:ee(o),timetable:t,date:o})}),Object(x.jsx)(h.a,{xs:8,sm:4,children:Object(x.jsx)(te,{day:X(l.getDay()),week:ee(l),timetable:t,date:l})}),Object(x.jsx)(h.a,{sm:3,className:"d-none d-sm-block",children:Object(x.jsx)(te,{day:X(b.getDay()),week:ee(b),timetable:t,date:b})}),Object(x.jsx)(h.a,{xs:2,sm:1,children:Object(x.jsx)(O.a,{className:"timetable-carousel-btn",variant:"light",onClick:function(){return s(a+1)},disabled:a===j.length-2,children:">"})})]})})},ce=n(91),re=function(e){var t=e.timetable;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(d.a,{children:[Object(x.jsx)(h.a,{children:Object(x.jsx)(ce.a,{variant:"secondary",children:"\u041d\u0435\u0447\u0451\u0442\u043d\u0430\u044f \u043d\u0435\u0434\u0435\u043b\u044f"})}),Object(x.jsx)(h.a,{children:Object(x.jsx)(ce.a,{variant:"secondary",children:"\u0427\u0451\u0442\u043d\u0430\u044f \u043d\u0435\u0434\u0435\u043b\u044f"})})]}),Z.map((function(e){return Object(x.jsxs)(d.a,{children:[Object(x.jsx)(h.a,{xs:6,children:Object(x.jsx)(te,{day:e,week:"Uneven",timetable:t})}),Object(x.jsx)(h.a,{xs:6,children:Object(x.jsx)(te,{day:e,week:"Even",timetable:t})})]},e)}))]})},ae=n(88),se=function(e){var t=e.onQuickTargetChange;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(O.a,{onClick:function(){t(!0)},children:"+"}),Object(x.jsx)(O.a,{onClick:function(){t(!1)},children:"-"})]})},ie=function(e){var t=e.error,n=e.timetable,c=e.isLoaded,r=e.onQuickTargetChange,a=e.target,s=Object(x.jsx)(ae.a,{animation:"border",role:"status",children:Object(x.jsx)("span",{className:"sr-only",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})}),i=Object(x.jsx)(se,{onQuickTargetChange:function(e){return r(a,e)}});return t?Object(x.jsxs)(g,{children:[Object(x.jsx)("h4",{children:Object(x.jsxs)(ce.a,{variant:"danger",children:["\u041e\u0448\u0438\u0431\u043a\u0430: ",t.message]})}),i]}):n?0===n.timetable.length?Object(x.jsxs)(g,{children:[Object(x.jsx)("h4",{children:Object(x.jsxs)(ce.a,{variant:"warning",children:[n.target," \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"]})}),i]}):Object(x.jsx)(g,{children:c?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h3",{children:n.target}),i]}):s}):Object(x.jsx)(g,{children:s})},ue=function(e){var t=e.target,n=e.onQuickTargetChange,c=Object(r.useState)(null),a=Object(u.a)(c,2),s=a[0],i=a[1],j=Object(r.useState)(null),l=Object(u.a)(j,2),b=l[0],d=l[1],h=Object(r.useState)(!1),O=Object(u.a)(h,2),m=O[0],f=O[1];return Object(r.useEffect)((function(){var e;f(!1),(e=t,V.Timetable.fetchExn(e).then((function(e){return{timetable:e.timetable.map((function(e){return{day:P[e.day],week:z[e.week],time:e.time,subject:e.subject,type_:e.type_,teacher:e.teacher,groups:e.groups,place:e.place,building:e.building,room:e.room,sync:e.sync}})),target:e.target,type_:e.type_,institute:e.institute}}))).then((function(e){d(e),f(!0),i(null)}),(function(e){console.error(e),i(e)}))}),[t]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(ie,{error:s,timetable:b,isLoaded:m,onQuickTargetChange:n,target:t}),!s&&b&&0!==b.timetable.length?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(o.a,{fluid:!0,children:Object(x.jsx)(ne,{timetable:b})}),Object(x.jsx)(o.a,{children:Object(x.jsx)(re,{timetable:b})})]}):Object(x.jsx)(x.Fragment,{})]})},je=function(e){var t=e.onQuickTargetChange,n=Object(l.m)().target;return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(ue,{target:n,onQuickTargetChange:t})})},oe=n(55),le=n.n(oe),be=n(66),de=function(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),n=t[0],c=t[1];return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(b.a,{children:Object(x.jsxs)(b.a.Group,{controlId:"formBasicEmail",children:[Object(x.jsx)(b.a.Control,{placeholder:"Enter t",onChange:function(e){return c(e.target.value)}}),Object(x.jsx)(b.a.Text,{children:"safs"})]})}),Object(x.jsx)(he,{startWith:n})]})},he=function(e){var t=e.startWith,n=Object(r.useState)(null),c=Object(u.a)(n,2),a=(c[0],c[1]),s=Object(r.useState)(!1),i=Object(u.a)(s,2),j=(i[0],i[1]),o=Object(r.useState)([]),l=Object(u.a)(o,2),b=(l[0],l[1],Object(r.useState)("1")),d=Object(u.a)(b,2),h=d[0],O=d[1];return Object(r.useEffect)((function(){j(!1),fetch("https://edu.sfu-kras.ru/timetable/groups/autocomplete/"+encodeURIComponent(t),{headers:{Accept:"application/json"}}).then(function(){var e=Object(be.a)(le.a.mark((function e(t){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.text());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){j(!0),console.log(e),O(e)}),(function(e){j(!0),console.log(e),a(e)}))}),[t]),Object(x.jsx)("div",{children:h})},Oe=function(e){var t=e.onQuickTargetChange;return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(l.g,{children:[Object(x.jsx)(l.d,{path:"/auto",children:Object(x.jsx)(de,{})}),Object(x.jsx)(l.d,{path:"/:target",children:Object(x.jsx)(je,{onQuickTargetChange:t})}),Object(x.jsx)(l.d,{path:"/",children:Object(x.jsx)(p,{})})]})})},xe=n(90),me=n(92),fe=n(56),ge=function(e){var t=e.quickTargets,n=Object(l.n)("/:target");return Object(x.jsxs)(xe.a,{bg:"light",expand:"lg",children:[Object(x.jsx)(fe.LinkContainer,{to:"/",children:Object(x.jsx)(xe.a.Brand,{children:ye.slice(1)})}),Object(x.jsx)(xe.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(x.jsxs)(xe.a.Collapse,{id:"basic-navbar-nav",children:[Object(x.jsx)(me.a,{activeKey:decodeURIComponent(n?n.params.target:"").toLowerCase(),className:"mr-auto",children:t.map((function(e){return Object(x.jsx)(me.a.Item,{children:Object(x.jsx)(fe.LinkContainer,{to:"/"+encodeURIComponent(e),children:Object(x.jsx)(me.a.Link,{eventKey:e.toLowerCase(),children:e})})},e)}))}),Object(x.jsx)(m,{})]})]})},pe=function(e){var t=e.quickTargets,n=e.onQuickTargetChange;return Object(x.jsx)(j.BrowserRouter,{basename:ye,children:Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(j.HashRouter,{children:Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(o.a,{fluid:!0,children:[Object(x.jsx)(o.a,{children:Object(x.jsx)(ge,{quickTargets:t})}),Object(x.jsx)(Oe,{onQuickTargetChange:n})]})})})})})},ye="/sfu-timetable-3d50",ve=function(){var e=Object(r.useState)((function(){return localStorage.getItem("quick_targets")||localStorage.setItem("quick_targets",JSON.stringify(["\u041a\u041818-16\u0431 (1 \u043f\u043e\u0434\u0433\u0440\u0443\u043f\u043f\u0430)","\u041a\u041818-17/2\u0431 (1 \u043f\u043e\u0434\u0433\u0440\u0443\u043f\u043f\u0430)"])),JSON.parse(localStorage.getItem("quick_targets"))})),t=Object(u.a)(e,2),n=t[0],c=t[1];return Object(x.jsx)(pe,{quickTargets:n,onQuickTargetChange:function(e,t){e=decodeURIComponent(e);var n=localStorage.getItem("quick_targets");if(n){var r=JSON.parse(n);t?r.map((function(e){return e.toLocaleLowerCase()})).includes(e.toLocaleLowerCase())||r.push(e):r=r.filter((function(t){return t!==e})),localStorage.setItem("quick_targets",JSON.stringify(r)),c(r)}}})},ke=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,95)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))};n(81);i.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(ve,{})}),document.getElementById("root")),ke()}},[[82,1,2]]]);
//# sourceMappingURL=main.b73b130d.chunk.js.map